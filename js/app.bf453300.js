(function(e){function t(t){for(var r,n,s=t[0],c=t[1],l=t[2],A=0,d=[];A<s.length;A++)n=s[A],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,n=1;n<a.length;n++){var s=a[n];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},n={app:0},o={app:0},i=[];function s(e){return c.p+"js/"+({Home:"Home"}[e]||e)+"."+{Home:"f2de88ab","chunk-fbffeefc":"eb07a48e"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={Home:1,"chunk-fbffeefc":1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise((function(t,a){for(var r="css/"+({Home:"Home"}[e]||e)+"."+{Home:"9e6f463a","chunk-fbffeefc":"c5d6faff"}[e]+".css",o=c.p+r,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=i[s],A=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(A===r||A===o))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],A=l.getAttribute("data-href");if(A===r||A===o)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete n[e],u.parentNode.removeChild(u),a(i)},u.href=o;var g=document.getElementsByTagName("head")[0];g.appendChild(u)})).then((function(){n[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,a){r=o[e]=[t,a]}));t.push(r[2]=i);var l,A=document.createElement("script");A.charset="utf-8",A.timeout=120,c.nc&&A.setAttribute("nonce",c.nc),A.src=s(e);var d=new Error;l=function(t){A.onerror=A.onload=null,clearTimeout(u);var a=o[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,a[1](d)}o[e]=void 0}};var u=setTimeout((function(){l({type:"timeout",target:A})}),12e4);A.onerror=A.onload=l,document.head.appendChild(A)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],A=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=A;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0d25":function(e,t){e.exports="data:image/png;base64,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"},1:function(e,t){},"16f9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAHXCAYAAACxuV3NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgoSURBVHgB7d3NbVxVGIDhbxKzjOQlEgkZOkgJpgOoAOggVBCoIKGChAqSDqAESohICsiGHehyQxA45M9/LOa+zyN5xpZtaXavdM53z5kB4CAts98vc/NkLunaAHDAdg+XOT6eSxACgMO2n7lxfy5BCAAO39fLfPrVXJAQAGzC8mCZj/dzAUIAsA3rPsFHD+cChABgO07WJaK7c05CALApy/1lPrlznv8QAoDNufb4PCOlQgCwPfuZG/fO+sdCALBNd8/61LEQAGzW7vFZRkqFAGC7zjRSKgQA2/bBkVIhANi85d77loiEAGD71iWio8fv+qUQACTs7ixz662nlAoBQMdbR0qFACDlzYtshACgZT9z47WRUiEA6Pni9EipEAAk/TtSKgQATf88dSwEAF0ny3x2WwgA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADijpa5eTKz+2kAODB/zFW4tpvnP68h+HYASPpraWg3vz6YWX4YAHJ2p39Yl4nWJaLdyQAQcbT/z2bx0Zfry9MBIOO1EOzm6YuZ65+v374YABLeGB9dY/B0fftmAEh463MEu3n2ZN0x+H4A2Lx3PlC2m+ffrW8/DgCb9oEni6/fXZPwywCwWe8NwavN42smiQA27INnDb3aPL7+MgYmiQA26EyHzq0xeLk85BgKgA068+mju3n2yCQRwPac6xhqk0QA23OB+wheThLZPAbYinOH4NQxFE8HgIN3oRvKTk0SAXDgLnxV5atJIhfaABy6S91Z7EIbgMO3myuwzK1H6+vtuZzj9eMcD5dx/PcXwBkd7a8kBLAly+wF9Ur8vh+uwLKf/9VvT/4EpKJkG/jb5PwAAAAASUVORK5CYII="},"1a9e":function(e,t){e.exports="data:image/png;base64,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"},"1b7f":function(e,t,a){},2:function(e,t){},"2a7d":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("button",[e._t("default",(function(){return[e._v("button")]}))],2)},n=[],o={},i=o,s=(a("c27f"),a("e607")),c=Object(s["a"])(i,r,n,!1,null,"4cc6bfad",null);t["a"]=c.exports},3:function(e,t){},3347:function(e,t,a){"use strict";a("1b7f")},4:function(e,t){},5:function(e,t){},"54b1":function(e,t,a){"use strict";var r=t;r.ClientRubyETH=a("62fb"),r.ClientRubyERC20=a("fad8")},"56d7":function(e,t,a){"use strict";a.r(t);var r=a("b339"),n=function(){var e=this,t=e._self._c;return t("div",{ref:"app",attrs:{id:"app"}},[t("header-nav",{ref:"header",staticClass:"nav",attrs:{bgColor:"black"}}),t("div",{ref:"main",staticClass:"main",staticStyle:{position:"absolute",top:"106px",bottom:"26px",width:"100%"}},[t("router-view")],1),t("div",{ref:"footer",staticStyle:{background:"black",position:"fixed",bottom:"0px",left:"0px",width:"100%",height:"26px"}},[t("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a("eea0"),alt:""}})]),t("r-login",{model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)},o=[],i=a("23c5"),s=function(){var e=this,t=e._self._c;return t("div",{class:e.side?"header header-side":"header",style:{"background-color":e.bgColor,"padding-left":e.tab?"63px":"41px"}},[t("img",{staticClass:"header-img",attrs:{src:a("1a9e")},on:{click:e.gohome}}),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.tab,expression:"tab"}],staticClass:"header-nav-item"},e._l(e.list,(function(a){return t("li",{key:a.label},[void 0!=a.link?t("a",{staticClass:"label anchorotherweb",attrs:{href:a.link,target:""+("#"==a.link?"":"_blank")}},[e._v(e._s(a.label))]):t("span",{staticClass:"label",class:{active:!0}},[e._v(e._s(a.label))])])})),0),t("el-dropdown",{staticClass:"header-info"},[t("div",[t("img",{staticClass:"layer",attrs:{src:a("a888")}}),t("span",[e._v(" "+e._s(e.user)+" ")])]),t("el-dropdown-menu",[t("el-dropdown-item",{nativeOn:{click:function(t){return e.connect.apply(null,arguments)}}},[e._v(" Reconnect ")]),"......"!=e.user?t("el-dropdown-item",{nativeOn:{click:function(t){return e.quit.apply(null,arguments)}}},[e._v(" Quit ")]):e._e()],1)],1)],1)},c=[],l=(a("149f"),a("7736"));let A,d=0;const u=(e="loading……")=>{A=i["Loading"].service({lock:!0,text:e,background:"rgba(0, 0, 0, 0.7)"})},g=()=>{A.close()},h=e=>{0===d&&u(e),d+=1},m=()=>{d<=0||(d-=1,0===d&&g())};var f={data(){return{list:[{label:"Swap"},{label:"Tutorial",link:"https://docs.ruby.xyz/tutorial/connect-your-wallet"},{label:"Q&A",link:"https://docs.ruby.xyz/faqs/faqs"},{label:"Info",link:"https://docs.ruby.xyz"}]}},props:{side:{type:Boolean,default:!1},bgColor:{type:String},tab:{type:Boolean,default:!0}},components:{ElDropdown:i["Dropdown"],ElDropdownItem:i["DropdownItem"],ElDropdownMenu:i["DropdownMenu"]},computed:Object(l["b"])({user:e=>{const t=e.user,a=t.substring(0,5),r=t.substring(t.length-7);return`${a}......${r}`},type:e=>e.type}),methods:{quit(){this.$store.commit("setUser",""),console.log(this.$ruby),this.$ruby.rubyClient&&(this.$ruby.rubyClient.account=void 0,this.$ruby.rubyClient.home=void 0),this.$router.replace("/")},connect(){console.log("connect"),this.initRubyClient("ETH")},gohome(){this.$router.push("/"),this.$hideLoading()},async swap(e){if(!this.$ruby.rubyClient)try{await this.initRubyClient()}catch(t){this.$message("Connect wallet Error"),console.error(t)}if(this.$store.state.type!==e)switch(this.$store.commit("setType",e),e){case"BNB":h("init RubyBNBClient...");try{await this.$ruby.initRubyEthClient()}catch(t){this.$message(t.message),console.error(t)}m(),this.$router.push("/login");break;default:this.$message("Coming Soon!")}else this.$message("You Are Already Here")}}},b=f,y=(a("7e51"),a("e607")),w=Object(y["a"])(b,s,c,!1,null,"052d3816",null),p=w.exports,C=function(){var e=this,t=e._self._c;return e.show?t("div",{staticClass:"dialog-box",on:{click:e.close}},[t("div",{staticClass:"dialog",style:`height: ${e.register?450:370}px`,on:{click:function(e){e.stopPropagation()}}},[e.register?t("img",{staticClass:"outline",attrs:{src:a("16f9"),alt:""}}):t("img",{staticClass:"outline",attrs:{src:a("89f8"),alt:""}}),t("img",{staticClass:"login",attrs:{src:a("0d25"),alt:""}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.register,expression:"!register"}],staticClass:"login-form"},[t("div",{staticClass:"label gray-font"},[e._v("Ruby Secret Key")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],attrs:{type:"text"},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),t("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.register,expression:"!register"}],staticClass:"footer",attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",{staticClass:"tip",attrs:{span:18}},[t("div",{staticClass:"white-font"},[e._v("Don't have an Account? ")]),t("div",{staticClass:"switch-text red-font",on:{click:e.toRegist}},[t("span",[e._v("Register")])])]),t("r-button",{staticStyle:{"padding-left":"15px","padding-right":"15px"},nativeOn:{click:function(t){return e.login.apply(null,arguments)}}},[e._v("Login")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.register,expression:"register"}],staticClass:"register"},[t("div",{staticClass:"tip gray-font",staticStyle:{"margin-top":"20px"}},[e._v("Please use our key generator or use a key that is as random as your Meramask wallet private key as the Ruby account private key, and copy it on paper for safekeeping.")]),t("div",{staticClass:"tip red-font",staticStyle:{"margin-top":"20px"}},[e._v("Never share your private key with others.")]),t("div",{staticClass:"tip red-font",staticStyle:{"margin-top":"20px"}},[e._v("This private key is for the access of "+e._s("RUBY-"+this.type)+" account. It cannot be used to access any other Ruby account.")]),t("div",{staticClass:"options"},[t("r-button",{staticStyle:{width:"100%"},nativeOn:{click:function(t){return e.generatorKey.apply(null,arguments)}}},[e._v("Private Key Generator")]),t("div",{staticClass:"red-font center-text",staticStyle:{"font-size":"12px",margin:"10px"}},[e._v("OR")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ownKey,expression:"ownKey"}],staticStyle:{width:"55%","box-sizing":"border-box",padding:"0 5px"},attrs:{type:"text",placeholder:"Pick Your Own Key"},domProps:{value:e.ownKey},on:{input:function(t){t.target.composing||(e.ownKey=t.target.value)}}}),t("r-button",{staticStyle:{"margin-left":"5%",width:"40%"},nativeOn:{click:function(t){return e.registerOwnKey.apply(null,arguments)}}},[e._v("Register with It")])],1)],1),t("div",{staticClass:"red-font switch-text",on:{click:function(t){e.register=!1}}},[t("span",{staticClass:"red-font"},[e._v("Back to Login")])])])],1)]):e._e()},E=[],v=a("2a7d"),B=(a("d383"),a("9a65")),R=a.n(B),I=a("7b04"),T=a.n(I);const O=()=>new R.a(T.a.randomBytes(32),16),Q=()=>btoa(O().toString()),M=(e,t)=>{const a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(`This private key is for the access of RUBY-p${t} account.It cannot be used to access any other Ruby account.\n`+e)),a.setAttribute("download",`ruby_${t}_secret_key_${Date.now()}`),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)};var k={components:{RButton:v["a"],ElCol:i["Col"],ElRow:i["Row"]},model:{prop:"show",event:"switch"},props:{show:Boolean},data(){return{register:!1,account:"",ownKey:""}},created(){console.log(this.type)},computed:{type(){return this.$store.state.type}},methods:{async registerOwnKey(){if(this.ownKey.length<16)this.$message("Account length must be greater than 16");else if(this.$ruby.rubyClient){this.$showLoading("registering...");try{await this.$ruby.rubyEthRegister(this.ownKey)}catch(e){return this.$message(e),void this.$hideLoading()}this.$hideLoading(),M(this.ownKey,this.type),this.register=!1}else this.$message("Your Local Client Connection Failed.Please Refresh The Page")},async generatorKey(){const e=Q();this.$showLoading("registering...");try{await this.$ruby.rubyEthRegister(e)}catch(t){return this.$message(t),void this.$hideLoading()}this.$hideLoading(),M(e,this.type),this.register=!1},async login(){if(this.account)if(this.$ruby.rubyClient){this.$showLoading("logining in...");try{const t=await this.$ruby.rubyEthLogin(this.account);if(0==t){this.$message("Login Successful");try{const e=await this.$ruby.rubyEthAddress();this.$store.commit("setRubyAddress",e)}catch(e){if(this.account="",e)return this.$message(e),void this.$hideLoading();this.$message("Something Went Wrong."),console.error(e)}this.account="",this.$hideLoading(),this.$router.push("/tx"),this.$hideLogin()}else if(-1==t)return this.$message({type:"error",message:"login failed: this ruby account dose not exist"}),this.account="",void this.$hideLoading()}catch(e){return this.$message(e),this.$hideLoading(),void(this.account="")}}else this.$message("Your Local Client Connection Failed.Please Refresh The Page");else this.$message("please input scret")},close(){this.$emit("switch",!1)},toRegist(){this.$ruby.rubyClient?this.register=!0:this.$message("Your Local Client Connection Failed.Please Refresh The Page")}}},D=k,S=(a("a5e3"),Object(y["a"])(D,C,E,!1,null,"c539f6f6",null)),x=S.exports,K={components:{headerNav:p,rLogin:x},data(){return{showDialog:!1,loadingCount:0,loading:void 0}},created(){r["default"].prototype.$showLoading=this.showLoading,r["default"].prototype.$hideLoading=this.hideLoading,r["default"].prototype.$showLogin=this.showLogin,r["default"].prototype.$hideLogin=this.hideLogin,r["default"].prototype.$switchNetwork=this.switchNetwork},methods:{showLoading(e){0===this.loadingCount&&(this.loading=i["Loading"].service({target:this.$refs.main,lock:!0,text:e||"loading……",background:"rgba(0, 0, 0, 0.7)"})),this.loadingCount+=1},hideLoading(){this.loadingCount<=0||(this.loadingCount-=1,0===this.loadingCount&&this.loading.close())},showLogin(){this.showDialog=!0},hideLogin(){this.showDialog=!1},async switchNetwork(e){let t;if("ETH"==e)t=[{chainId:"0x1a4",chainName:"Optimism Goerli",rpcUrls:["https://goerli.optimism.io"],blockExplorerUrls:["https://goerli-optimism.etherscan.io"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18}}];else{if("Arbitrum"!=e)return!1;console.log("select Arbitrum"),t=[{chainId:"0x66eed",chainName:"Arbitrum Goerli Testnet",rpcUrls:["https://goerli-rollup.arbitrum.io/rpc"],blockExplorerUrls:["https://goerli.arbiscan.io/"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18}}]}return window.ethereum.request({method:"wallet_addEthereumChain",params:t})}}},P=K,z=(a("3347"),Object(y["a"])(P,n,o,!1,null,null,null)),H=z.exports,G=a("f038"),L=a("98fc"),N=a.n(L),_=a("bde9"),q=a.n(_);const J=a("54b1"),V={web3Provider:null,contracts:{rubyETHContract:null,rubyERC20Contract:null,erc20TokenContract:null},rubyClient:null,alice_address:"0xfb8C80F8143E5baF936fc5c6E73bB07A0a247D10",bob_address:"0xfc71E218fFF23fa5Da59bA02684e9393e84ff523",init:function(e){return V.initWeb3(e)},initWeb3:async function(e){if(window.ethereum){V.web3Provider=window.ethereum;try{await window.ethereum.enable()}catch(t){console.error("User denied account access")}console.log("using modern dApp browser")}else window.web3?(V.web3Provider=window.web3.currentProvider,console.log("using legacy dApp browser")):(V.web3Provider=new q.a.providers.HttpProvider("https://ropsten.infura.io/v3/f0133270d95d492aa5d4bb8944b36bc6"),console.log("using ropsten"));return V.web3=new q.a(V.web3Provider),V.initContract(e)},initContract:async function(e){console.log("initContract",e);const t={ETH:"0xa391554CE9Dd3E504CADa7BD369Bf9d8Af59646e",Arbitrum:"0xb7c767237C6B7193f9d7bbFAE4743f3c181E3aD3"},a={ETH:"contracts_op",Arbitrum:"contracts_arbi"};console.log("folder:",a[e],t[e]);let r=(await N.a.getJSON(a[e]+"/RubyETH.json")).abi;return V.contracts.rubyETHContract=new V.web3.eth.Contract(r,t[e]),V.contracts.rubyETHContract.setProvider(V.web3Provider),V},initRubyEthClient:async function(){let e=await V.web3.eth.getAccounts();return this.rubyClient=new J.ClientRubyETH(V.web3,V.contracts.rubyETHContract,e[0]),await this.rubyClient.init(),console.log("Initialization completed."),e[0]},rubyEthLogin:async function(e){return this.secret=e,await this.rubyClient.login(e)},rubyEthRegister:async function(e){await this.rubyClient.register(e),console.log("keypair: ",this.rubyClient.account.keypair)},rubyEthDeposit:async function(e){await this.rubyClient.register(this.secret),await this.rubyClient.mint(e)},rubyEthWithdraw:async function(e){await this.rubyClient.register(this.secret),await this.rubyClient.redeem(e)},rubyEthBalance:async function(){let e=await this.rubyClient.readBalanceFromContract();return e},rubyEthAddress:async function(){return this.rubyClient.account.publicKeyEncoded()},rubyEthTransfer:async function(e,t){await this.rubyClient.transfer(e,t)},mintERC20Token:async function(){let e=await V.web3.eth.getAccounts();await new Promise((t,a)=>{V.contracts.erc20TokenContract.methods.mint(e[0],"20000000000000000000000000").send({from:e[0],gas:47e5}).on("transactionHash",e=>{console.log('Mint submitted (txHash = "'+e+'").')}).on("receipt",a=>{V.contracts.erc20TokenContract.methods.balanceOf(e[0]).call().then(e=>{console.log("ERC20 funds minted (balance = "+e+")."),t(a)})}).on("error",e=>{a(e)})})},initRubyERC20Client:async function(){let e=await V.web3.eth.getAccounts();console.log("accounts: ",e),this.rubyClient=new J.ClientRubyERC20(V.web3,V.contracts.rubyERC20Contract,e[0],V.contracts.erc20TokenContract),await this.rubyClient.init(),this.secret=e[0].slice(2),console.log("Initialization completed.")},rubyERC20Register:async function(){await this.rubyClient.register(this.secret),console.log("keypair: ",this.rubyClient.account.keypair)},rubyERC20Deposit:async function(){await this.rubyClient.register(this.secret),await this.rubyClient.mint(10)},rubyERC20Withdraw:async function(){await this.rubyClient.register(this.secret),await this.rubyClient.redeem(5)},rubyERC20Balance:async function(){console.log("this.secret: ",this.secret),await this.rubyClient.register(this.secret)},rubyERC20Address:async function(){console.log("ruby address: ",this.rubyClient.account.publicKeyEncoded())},rubyERC20Transfer:async function(){var e=N()("#TransferRubyERC20Address").val(),t=N()("#TransferRubyERC20Decoys").val().split(",").filter(e=>""!=e);await this.rubyClient.transfer(e,5,t)}};var U=V;r["default"].use(G["a"]);const Y=[{path:"/",name:"Home",component:()=>a.e("Home").then(a.bind(null,"bb51"))},{path:"/tx",component:()=>a.e("chunk-fbffeefc").then(a.bind(null,"0951"))}],j=new G["a"]({routes:Y}),X=["/"];j.beforeEach(async(e,t,a)=>{if(!X.includes(e.path)&&!U.rubyClient)return r["default"].prototype.$message("Please Init Your Client By Click On The Card Below!"),void a("/");a()});var F=j;a("bb26");r["default"].use(l["a"]),r["default"].use(i["Dialog"]),r["default"].use(i["Loading"]);const W=new l["a"].Store({state:{user:"",type:"",rubyBalance:0,mateMaskBalance:0,rubyAddress:""},mutations:{setUser(e,t){e.user=t},setType(e,t){e.type=t},setRubyAddress(e,t){e.rubyAddress=t},setRubyBalance(e,t){e.rubyBalance=t},setMateMaskBalance(e,t){e.mateMaskBalance=t}},actions:{async getRubyBalance({commit:e}){const t=await U.rubyEthBalance();e("setRubyBalance",t)},async getMateMaskBalance({commit:e,state:t}){const a=await U.web3.eth.getBalance(t.user);e("setMateMaskBalance",(a/1e18).toFixed(4))},async getBalance({dispatch:e}){try{await e("getRubyBalance"),await e("getMateMaskBalance")}catch(t){Object(i["Message"])("Something Went Wrong."),console.error(t)}}}}),Z=e=>U.init(e).then((async function(){try{let e=await U.web3.eth.getAccounts();console.log(e);const t=await U.web3.eth.getBalance(e[0]);console.log("banlance",t),W.commit("setUser",e[0])}catch(e){console.log(e),Object(i["Message"])("Click The Account Button to Reconnect Your Wallet or Refresh This Page.")}}));Z("ETH"),r["default"].prototype.$ruby=U,r["default"].prototype.initRubyClient=Z,r["default"].prototype.$message=i["Message"],r["default"].config.productionTip=!1,new r["default"]({store:W,router:F,render:e=>e(H)}).$mount("#app")},"5c99":function(e,t,a){a("6e9f");const r=a("9a65"),n=a("63b5"),o=a("7b04"),i=new r("30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47",16),s=new r("30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001",16),c={};c.curve=new n.curve.short({a:"0",b:"3",p:i,n:s,gRed:!1,g:["77da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d4","1485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f875"]}),c.zero=c.curve.g.mul(0),c.p=r.red(c.curve.p),c.q=r.red(c.curve.n),c.randomScalar=()=>new r(o.randomBytes(32),16).toRed(c.q),c.bytes=e=>"0x"+e.toString(16,64),c.serialize=e=>null==e.x&&null==e.y?["0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000"]:[c.bytes(e.getX()),c.bytes(e.getY())],c.unserialize=e=>{if("0x0000000000000000000000000000000000000000000000000000000000000000"==e[0]&&"0x0000000000000000000000000000000000000000000000000000000000000000"==e[1])return c.zero;var t=c.curve.point(e[0].slice(2),e[1].slice(2));if(!c.curve.validate(t))throw new Error("Invalid public key (not on curve).");return t},c.serializedToEncoded=e=>e[0]+e[1].slice(2),c.encodedToSerialized=e=>{var t="0x"+e.slice(2,66),a="0x"+e.slice(66);return[t,a]},c.representation=e=>{var t=c.serialize(e);return t[0]+t[1].slice(2)},c.pointEqual=(e,t)=>e.eq(t),e.exports=c},6:function(e,t){},"62fb":function(e,t,a){const r=a("a9df"),n=a("f10d"),o=a("9a65"),i=a("e5dd");class s extends r{constructor(e,t,a){super(e,t,a)}async mint(e,t){var a=this;a.checkRegistered(),a.checkValue();var r=a.account;console.log("Initiating mint: value of "+e+" units ("+e*a.unit+" wei)");let s="0x"+n.encrypt(new o(r.available()).toString(16),r.aesKey);var c=a.web3.utils.toBN(new i(e*a.unit)).toString();void 0===t&&(t=4e5);let l=a.ruby.methods.mint(r.publicKeySerialized(),e,s).send({from:a.home,value:c,gas:t}).on("transactionHash",e=>{console.log('Mint submitted (txHash = "'+e+'").')}).on("receipt",async t=>{r._state=await r.update(),r._state.pending+=parseInt(e),console.log("Mint of "+e+" was successful (uses gas: "+t["gasUsed"]+")"),console.log("Account state: available = ",a.account.available(),", pending = ",a.account.pending(),", lastRollOver = ",a.account.lastRollOver())}).on("error",e=>{console.log("Mint failed: "+e)});return l}}e.exports=s},"6f94":function(e,t,a){const r=a("c332"),n=a("8556");class o{constructor(){var e=new r,t=new n;this.proveTransfer=(t,a,r,n,o,i,s,c,l,A,d)=>{var u={};u["CLn"]=t,u["CRn"]=a,u["C"]=r,u["D"]=n,u["y"]=o,u["epoch"]=i;var g={};return g["sk"]=s,g["r"]=c,g["bTransfer"]=l,g["bDiff"]=A,g["index"]=d,e.generateProof(u,g).serialize()},this.proveRedeem=(e,a,r,n,o,i,s)=>{var c={};c["CLn"]=e,c["CRn"]=a,c["y"]=r,c["epoch"]=n,c["sender"]=o;var l={};return l["sk"]=i,l["bDiff"]=s,t.generateProof(c,l).serialize()}}}e.exports=o},7:function(e,t){},"7a9d":function(e,t,a){},"7e51":function(e,t,a){"use strict";a("93cd")},8556:function(e,t,a){a("149f");const r=a("46b9"),n=a("9a65"),o=a("5c99"),i=a("f2fb"),{GeneratorParams:s,GeneratorVector:c,FieldVector:l,FieldVectorPolynomial:A,PolyCommitment:d}=a("ddef"),u=a("ff2d");class g{constructor(){this.serialize=()=>{var e="0x";return e+=o.representation(this.BA).slice(2),e+=o.representation(this.BS).slice(2),this.tCommits.getVector().forEach(t=>{e+=o.representation(t).slice(2)}),e+=o.bytes(this.tHat).slice(2),e+=o.bytes(this.mu).slice(2),e+=o.bytes(this.c).slice(2),e+=o.bytes(this.s_sk).slice(2),e+=o.bytes(this.s_b).slice(2),e+=o.bytes(this.s_tau).slice(2),e+=this.ipProof.serialize().slice(2),e}}}class h{constructor(){var e=new s(32),t=new u;this.generateProof=(a,u)=>{var h=new g,m=i.hash(r.encodeParameters(["bytes32[2]","bytes32[2]","bytes32[2]","uint256","address"],[a["CLn"],a["CRn"],a["y"],a["epoch"],a["sender"]]));a["CLn"]=o.unserialize(a["CLn"]),a["CRn"]=o.unserialize(a["CRn"]),a["y"]=o.unserialize(a["y"]),u["bDiff"]=new n(u["bDiff"]).toRed(o.q);var f=new l(u["bDiff"].toString(2,32).split("").reverse().map(e=>new n(e,2).toRed(o.q))),b=f.plus(new n(1).toRed(o.q).redNeg()),y=o.randomScalar();h.BA=e.commit(y,f,b);var w=new l(Array.from({length:32}).map(o.randomScalar)),p=new l(Array.from({length:32}).map(o.randomScalar)),C=o.randomScalar();h.BS=e.commit(C,w,p);var E=i.hash(r.encodeParameters(["bytes32","bytes32[2]","bytes32[2]"],[o.bytes(m),o.serialize(h.BA),o.serialize(h.BS)])),v=[new n(1).toRed(o.q)];for(let e=1;e<32;e++)v.push(v[e-1].redMul(E));v=new l(v);var B=i.hash(o.bytes(E)),R=[B.redPow(new n(2))],I=[new n(1).toRed(o.q)];for(let e=1;e<32;e++)I.push(I[e-1].redMul(new n(2).toRed(o.q)));var T=new l(I).times(R[0]),O=new A(f.plus(B.redNeg()),w),Q=new A(v.hadamard(b.plus(B)).add(T),p.hadamard(v)),M=O.innerProduct(Q),k=new d(e,M);h.tCommits=new c(k.getCommitments());var D=i.hash(r.encodeParameters(["bytes32","bytes32[2]","bytes32[2]"],[o.bytes(B),...k.getCommitments().map(o.serialize)])),S=k.evaluate(D);h.tHat=S.getX();var x=S.getR();h.mu=y.redAdd(C.redMul(D));var K=o.randomScalar(),P=o.randomScalar(),z=o.randomScalar(),H=e.getG().mul(K),G=e.getG().mul(P).add(a["CRn"].mul(R[0]).mul(K)),L=e.getG().mul(P.redNeg()).add(e.getH().mul(z)),N=i.gEpoch(a["epoch"]).mul(K);h.c=i.hash(r.encodeParameters(["bytes32","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]"],[o.bytes(D),o.serialize(H),o.serialize(G),o.serialize(L),o.serialize(N)])),h.s_sk=K.redAdd(h.c.redMul(u["sk"])),h.s_b=P.redAdd(h.c.redMul(u["bDiff"].redMul(R[0]))),h.s_tau=z.redAdd(h.c.redMul(x));var _=e.getGs(),q=e.getHs().hadamard(v.invert()),J=v.times(B).add(T),V=h.BA.add(h.BS.mul(D)).add(_.sum().mul(B.redNeg())).add(q.commit(J));V=V.add(e.getH().mul(h.mu.redNeg()));var U=i.hash(r.encodeParameters(["bytes32"],[o.bytes(h.c)])),Y=e.getG().mul(U);V=V.add(Y.mul(h.tHat));var j=new s(Y,_,q),X={primeBase:j,P:V},F={l:O.evaluate(D),r:Q.evaluate(D)};return h.ipProof=t.generateProof(X,F,U),h}}}e.exports=h},"89f8":function(e,t){e.exports="data:image/png;base64,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"},"93cd":function(e,t,a){},a50f:function(e,t,a){},a5e3:function(e,t,a){"use strict";a("a50f")},a888:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAXCAYAAAAGAx/kAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFcSURBVHgBzZTPTcMwFMa/BHorlY9I0MojlA3aDToCG8AGhQkQE0AnACYoG5QNsMSFGzlwQ2C+h53EgTiN1QufFCXP9vvF748NRGShlMVkaTF+5mPdW2yl2tZnMQgwXHN62jL7BLzPMxRFOJqjVcMzDzF0pNMLf7h34mwZH52jj+pwjqbN8eNZGWZfkCy2KXOR0CQEt4MmpNqh6QmyK/fObkpnB83v/Pjqt0ekappV+2LVbKRq+yyA2V41tyif0+kyCMM4+y/kf6rKkevmERvRzmjOut0kT9k1G/W2AbI41MCAyYVGmgzwwZy9Gr+b8GBK92rVuR+MF00fRsOP03qgG9CEaVXDJhfSaBsPWiBRwdlbZ+W5cSc8FSQRfL7Jd44dFDbmTqBQAvqhxq7QLrm2qUDSXKKDq3BiO0R+PFh684HJ1poJ29BI3pFXIddwzoQZfx/fI00E2EfxFcY3PeGaJDpuJ9EAAAAASUVORK5CYII="},a9df:function(e,t,a){a("6e9f");const r=a("9a65"),n=a("f2fb"),o=a("5c99"),i=a("b978"),s=a("f10d"),c=a("6f94"),l=a("46b9"),A=a("e5dd"),{soliditySha3:d}=a("ecc5");var u=e=>new Promise(t=>{setTimeout(t,e)});class g{constructor(e,t,a){if(void 0===e)throw"1st arg should be an initialized Web3 object.";if(void 0===t)throw"2nd arg should be a deployed Ruby constrct object.";if(void 0===a)throw"3rd arg should be the address of an Ethereum account.";console.log("Ruby contract: "+t.options.address),console.log("Native account: "+a),this.web3=e,this.ruby=t,this.home=a}async init(){var e=this;if(e.service=new c,e.gasLimit=547e4,e.round_base=await e.ruby.methods.round_base().call(),e.round_len=await e.ruby.methods.round_len().call(),e.blockMinedTime=3100,0==e.round_base)e.roundUnitTime=e.blockMinedTime;else{if(1!=e.round_base)throw new Error("Invalid round base.");e.roundUnitTime=1e3}e.unit=await e.ruby.methods.unit().call(),this._transfers=new Set,this.ruby.events.TransferOccurred({}).on("data",t=>{if(console.log("Receive TransferOccurred event"),e._transfers.has(t.transactionHash))e._transfers.delete(t.transactionHash);else{var a=e.account;t.returnValues["parties"].forEach((r,n)=>{if(o.pointEqual(a.publicKey(),r)){var s=t.blockNumber;this.web3.eth.getBlock(s).then(async r=>{if(0==e.round_base)a._state=await a.update(r.number);else{if(1!=e.round_base)throw new Error("Invalid round base.");a._state=await a.update(r.timestamp)}this.web3.eth.getTransaction(t.transactionHash).then(t=>{var r;e.ruby._jsonInterface.forEach(e=>{"transfer"==e["name"]&&(r=e["inputs"])});var o=this.web3.eth.abi.decodeParameters(r,"0x"+t.input.slice(10)),s=i.unserialize([o["C"][n],o["D"]]),c=i.decrypt(s,a.privateKey());c>0&&(a._state.pending+=c,console.log("Transfer of "+c+" received! Balance now "+a.balance()+"."))})})}})}}).on("error",e=>{console.log(e)}),this.account=new function(){this.keypair=void 0,this.aesKey=void 0,this._state={available:0,pending:0,nonceUsed:0,lastRollOver:0},this.update=async t=>{var a={};return a.available=this._state.available,a.pending=this._state.pending,a.nonceUsed=this._state.nonceUsed,a.lastRollOver=await e._getRound(t),this._state.lastRollOver<a.lastRollOver&&(a.available+=a.pending,a.pending=0,a.nonceUsed=!1),a},this.available=()=>this._state.available,this.setAvailable=e=>{this._state.available=e},this.pending=()=>this._state.pending,this.setPending=e=>{this._state.pending=e},this.lastRollOver=()=>this._state.lastRollOver,this.balance=()=>this._state.available+this._state.pending,this.publicKey=()=>this.keypair["y"],this.privateKey=()=>this.keypair["x"],this.publicKeySerialized=()=>o.serialize(this.keypair["y"]),this.privateKeySerialized=()=>o.bytes(this.keypair["x"]),this.publicKeyEncoded=()=>o.serializedToEncoded(this.publicKeySerialized()),this.publicKeyHash=()=>{var e=l.encodeParameter("bytes32[2]",this.publicKeySerialized());return d(e)}},this.account._state=await this.account.update()}static async registered(e,t){var a=l.encodeParameter("bytes32[2]",t),r=d(a);return await e.methods.registered(r).call()}async setRedeemFeeStrategy(e,t){var a=this;let r=a.ruby.methods.setRedeemFeeStrategy(e,t).send({from:a.home,gas:a.gasLimit}).on("transactionHash",e=>{console.log('Change redeem fee submitted (txHash = "'+e+'").')}).on("receipt",()=>{console.log("Change redeem fee successful.")}).on("error",e=>{throw console.log("Change redeem fee failed: "+e),e});return r}async setTransferFeeStrategy(e,t){var a=this;let r=a.ruby.methods.setTransferFeeStrategy(e,t).send({from:a.home,gas:a.gasLimit}).on("transactionHash",e=>{console.log('Change transfer fee submitted (txHash = "'+e+'").')}).on("receipt",()=>{console.log("Change transfer fee successful.")}).on("error",e=>{throw console.log("Change transfer fee failed: "+e),e});return r}async setRoundBase(e){var t=this;let a=t.ruby.methods.setRoundBase(e).send({from:t.home,gas:t.gasLimit}).on("transactionHash",e=>{console.log('Set round base submitted (txHash = "'+e+'").')}).on("receipt",()=>{console.log("Set round base successful."),t.round_base=e}).on("error",e=>{throw console.log("Set epohc base failed: "+e),e});return a}async setRoundLen(e){var t=this;let a=t.ruby.methods.setRoundLen(e).send({from:t.home,gas:t.gasLimit}).on("transactionHash",e=>{console.log('Set round length submitted (txHash = "'+e+'").')}).on("receipt",()=>{console.log("Set round length successful."),t.round_len=e}).on("error",e=>{throw console.log("Set epohc length failed: "+e),e});return a}async setRubyAgency(e){var t=this;let a=t.ruby.methods.setRubyAgency(e).send({from:t.home,gas:t.gasLimit}).on("transactionHash",e=>{console.log('Set ruby agency submitted (txHash = "'+e+'").')}).on("receipt",()=>{console.log("Set ruby agency successful.")}).on("error",e=>{throw console.log("Set ruby agency failed: "+e),e});return a}async _getRound(e){var t=this;if(0==t.round_base)return void 0===e?Math.floor(await t.web3.eth.getBlockNumber()/t.round_len):e/t.round_len;if(1==t.round_base)return Math.floor((void 0===e?(new Date).getTime()/1e3:e)/t.round_len);throw new Error("Invalid round base.")}async _away(){var e=this;if(0==e.round_base){let t=await e.web3.eth.getBlockNumber();return Math.ceil(t/e.round_len)*e.round_len-t}if(1==e.round_base){let t=(new Date).getTime();return(Math.ceil(t/(1e3*e.round_len))*(1e3*e.round_len)-t)/1e3}}checkRegistered(){var e=this;if(void 0===e.account.keypair)throw"Call register() first to register an account."}checkValue(e){if(e<=0||e>i.MAX_PLAIN)throw"Invalid value: "+e}async getGuess(){var e=this;e.checkRegistered();let t=await e.ruby.methods.getGuess(e.account.publicKeySerialized()).call();if(null==t)return 0;var a=s.decrypt(t.slice(2),e.account.aesKey);return a=parseInt(a,16),console.log("guess: ",a),a}async readBalanceFromContract(){var e=this;e.checkRegistered();let t=await e._getRound(),a=await e.ruby.methods.getBalance([e.account.publicKeySerialized()],t+1).call();var r=i.unserialize(a[0]),n=await e.getGuess(),o=i.decrypt(r,e.account.privateKey(),n);return console.log("Read balance successfully: "+o),o}async syncAccountState(){var e=this;e.checkRegistered();let t=await e.ruby.methods.getAccountState(e.account.publicKeySerialized()).call();var a=i.unserialize(t["y_available"]),r=i.unserialize(t["y_pending"]),n=await e.getGuess();return e.account.setAvailable(i.decrypt(a,e.account.privateKey(),n)),e.account.setPending(i.decrypt(r,e.account.privateKey())),e.account._state.lastRollOver=await e.ruby.methods.last_roll_over(e.account.publicKeyHash()).call(),e.account._state.nonceUsed=!0,console.log("Account synchronized with contract: available = ",e.account.available(),", pending = ",e.account.pending(),", lastRollOver = ",e.account.lastRollOver()),0}async register(e,t){var a=this;void 0===e?(a.account.keypair=n.createAccount(),a.account.aesKey=s.generateKey()):(a.account.keypair=n.keyPairFromSecret(e),a.account.aesKey=s.generateKey(e));let r=await g.registered(a.ruby,a.account.publicKeySerialized());if(r)return await a.syncAccountState();{var[o,i]=n.sign(a.ruby._address,a.account.keypair);void 0===t&&(t=19e4);let e=a.ruby.methods.register(a.account.publicKeySerialized(),o,i).send({from:a.home,gas:t}).on("transactionHash",e=>{console.log('Registration submitted (txHash = "'+e+'").')}).on("receipt",()=>{console.log("Registration successful.")}).on("error",e=>{a.account.keypair=void 0,console.log("Registration failed: "+e)});return e}}async login(e){var t=this;void 0===e?(t.account.keypair=n.createAccount(),t.account.aesKey=s.generateKey()):(t.account.keypair=n.keyPairFromSecret(e),t.account.aesKey=s.generateKey(e));let a=await g.registered(t.ruby,t.account.publicKeySerialized());return a?await t.syncAccountState():(console.log("Login failed: this ruby account is not exists"),-1)}async mint(e){throw new Error("Mint not implemented.",e)}async redeem(e,t){var a=this;a.checkRegistered(),a.checkValue();var c=a.account,l=await c.update();if(e>c.balance())throw new Error("Requested redeem amount of "+e+" exceeds account balance of "+c.balance()+".");var A=await a._away(),d=0==a.round_base?"blocks":"seconds";if(e>l.available)return console.log("[Pending unmerged] Your redeem has been queued. Please wait "+A+" "+d+" for the release of your funds... "),u(A*a.roundUnitTime).then(()=>a.redeem(e));if(l.nonceUsed)return console.log("[Nonce used] Your redeem has been queued. Please wait "+A+" "+d+", until the next round..."),u(A*a.roundUnitTime).then(()=>a.redeem(e));if(0==a.round_base&&a.round_len/4>=A)return console.log("[Short window] Your redeem has been queued. Please wait "+A+" "+d+", until the next round..."),u(A*a.roundUnitTime).then(()=>this.redeem(e));if(1==a.round_base&&a.blockMinedTime>=A*a.roundUnitTime)return console.log("[Short window] Your redeem has been queued. Please wait "+A+" "+d+", until the next round..."),u(A*a.roundUnitTime).then(()=>this.redeem(e));console.log("Initiating redeem.");let g=await a._getRound(),h=await a.ruby.methods.getBalance([c.publicKeySerialized()],g).call();var m=i.unserialize(h[0]),f=i.serialize(i.subPlain(m,e)),b=a.service.proveRedeem(f[0],f[1],c.publicKeySerialized(),l.lastRollOver,a.home,c.privateKey(),l.available-e),y=o.serialize(n.u(l.lastRollOver,c.privateKey()));let w="0x"+s.encrypt(new r(c.available()).toString(16),c.aesKey);void 0===t&&(t=3e6);let p=a.ruby.methods.redeem(c.publicKeySerialized(),e,y,b,w).send({from:a.home,gas:t}).on("transactionHash",e=>{console.log('redeem submitted (txHash = "'+e+'").')}).on("receipt",async t=>{c._state=await c.update(),c._state.nonceUsed=!0,c._state.pending-=e,console.log("redeem of "+e+" was successful (uses gas: "+t["gasUsed"]+")"),console.log("Account state: available = ",a.account.available(),", pending = ",a.account.pending(),", lastRollOver = ",a.account.lastRollOver())}).on("error",e=>{console.log("redeem failed: "+e)});return p}async transfer(e,t,a,s){var c=(e,t)=>(Math.ceil(e*Math.log(e)/Math.log(2)*20+5200)+(t?20:0))/1e3,l=(e,t,a)=>{var r=e[t];e[t]=e[a],e[a]=r},d=this;d.checkRegistered(),d.checkValue(),void 0===a&&(a=["0x2113416df38f399d17efbf8e819bce71edf4224c3394e77d9f656d59fdc07bb10d71e8c0553939a16566141cc62a0f0b0f33041e8863c84bca22387f072c7a6f","0x1eef7bd48f5b4452ff84796cac1f705571b2615c289aee732215801efbf6ddf2248087742b36d1d5d56ac9a164c26dc64692d841a3b2fb07b2fc691ad5eb7195","0x0b9789644e3e9934e1a8de7fee5da9b6211f16a11c52dd079f59e5056009f74406cada714b1bb11d0dace644f4175d85b7a67ab3367c2221ff11dbb86631f632","0x0b3546acfd90f8c2a9e9d35fe53b9673ae2fc281dcdcfaeafd290b852f256b5b2fc6f54d2874ed5f8840a1a525ed401fa741f44040bdef1c16ba985e5a0a0267","0x1e2d3366fd942f345178635e6340c7efae729eaa8b26544aa4350266771ba6f32581f7eae4a86dd8f82dd3eb57dba3d5ea26e6916a75d10e951d17f0c7da4023","0x078b13d654c4e6549040879e387e1c66dabdaa58874c2d9f896af97235cadd0e1571413da3217f3212224a1e740d0349bcdc1cce9347e32de16b9ac9e90f56c6"]),e=e.trim(),a=a.map(e=>e.trim());const h=2+a.length;if(h&h-1)throw"Size of anonymity set must be a power of 2!";var m=o.encodedToSerialized(e);let f=await g.registered(d.ruby,m);if(!f)throw new Error("Receiver has not been registered!");var b=d.account,y=await b.update();if(t>b.balance())throw"Requested transfer amount of "+t+" exceeds account balance of "+b.balance()+".";var w=await d._away(),p=0==d.round_base?"blocks":"seconds";if(t>y.available)return console.log("[Pending unmerged] Your transfer has been queued. Please wait "+w+" "+p+" for the release of your funds..."),u(w*d.roundUnitTime).then(()=>d.transfer(e,t,a,s));if(y.nonceUsed)return console.log("[Nonce used] Your transfer has been queued. Please wait "+w+" "+p+" until the next round..."),u(w*d.roundUnitTime).then(()=>d.transfer(e,t,a,s));if(0==d.round_base&&d.round_len/4>=w)return console.log("[Short window] Your transfer has been queued. Please wait "+w+" "+p+", until the next round..."),u(w*d.roundUnitTime).then(()=>d.transfer(e,t,a,s));if(1==d.round_base){var C=c(h,!1);if(C>d.round_len)throw"The anonymity size ("+h+") you've requested might take longer than the round length ("+d.round_len+" seconds) to prove. Consider re-deploying, with an round length at least "+Math.ceil(c(h,!0))+" seconds.";if(C>w)return console.log("[Short window] Your transfer has been queued. Please wait "+w+" "+p+", until the next round..."),u(w*d.roundUnitTime).then(()=>d.transfer(e,t,a,s))}if(console.log("Initiating transfer."),e=o.unserialize(m),o.pointEqual(e,b.publicKey()))throw new Error("Sending to yourself is currently unsupported.");a=a.map(e=>o.unserialize(o.encodedToSerialized(e)));var E=[b.publicKey()].concat([e]).concat([]),v=[],B=E.length;while(0!=B){var R=Math.floor(Math.random()*B);B--,l(E,R,B),o.pointEqual(E[B],b.publicKey())?v[0]=B:o.pointEqual(E[B],e)&&(v[1]=B)}if(v[0]%2==v[1]%2){var I=E[v[1]];E[v[1]]=E[v[1]+(v[1]%2==0?1:-1)],E[v[1]+(v[1]%2==0?1:-1)]=I,v[1]=v[1]+(v[1]%2==0?1:-1)}var T=E.map(o.serialize);let O=await d._getRound(),Q=await d.ruby.methods.getBalance(T,O).call();var M=Q.map(e=>i.unserialize(e));if(M.some(e=>e[0].eq(o.zero)&&e[1].eq(o.zero)))throw new Error("Please make sure all participants are registered.");var k=o.randomScalar(),D=E.map((e,a)=>a==v[0]?i.encrypt(new r(-t),e,k):a==v[1]?i.encrypt(new r(t),e,k):i.encrypt(new r(0),e,k)),S=D.map(e=>e[0]),x=D[0][1],K=M.map((e,t)=>e[0].add(S[t])),P=M.map(e=>e[1].add(x)),z=d.service.proveTransfer(K,P,S,x,E,y.lastRollOver,b.privateKey(),k,t,y.available-t,v),H=o.serialize(n.u(y.lastRollOver,b.privateKey()));S=S.map(o.serialize),x=o.serialize(x);var G=await this.web3.eth.getGasPrice();void 0===s&&(s=547e4+4e5*a.length);var L=d.web3.utils.toBN(new A(s*G)).toString();let N=d.ruby.methods.transfer(S,x,T,H,z).send({from:d.home,value:L,gas:s}).on("transactionHash",e=>{d._transfers.add(e),console.log('Transfer submitted (txHash = "'+e+'")')}).on("receipt",async e=>{b._state=await b.update(),b._state.nonceUsed=!0,b._state.pending-=t,console.log("Transfer of "+t+" was successful (uses gas: "+e["gasUsed"]+")"),console.log("Account state: available = ",d.account.available(),", pending = ",d.account.pending(),", lastRollOver = ",d.account.lastRollOver())}).on("error",e=>{throw console.log("Transfer failed: "+e),new Error(e)});return N}async transferToClient(e,t){return this.transfer(e.account.publicKeyEncoded(),t)}}e.exports=g},b978:function(e,t,a){const r=a("5c99"),n={MAX_PLAIN:2**32-1,encrypt:(e,t,a)=>{void 0===a&&(a=r.randomScalar());var n=r.curve.g.mul(e).add(t.mul(a)),o=r.curve.g.mul(a);return[n,o]},decrypt:(e,t,a)=>{var o=e[0],i=e[1],s=o.add(i.mul(t.redNeg()));void 0===a&&(a=0);for(var c=r.curve.g.mul(a),l=r.zero,A=0;A<n.MAX_PLAIN;A++){let e=c.add(l);if(e.eq(s))return a+A;if(e=c.add(l.neg()),e.eq(s))return a-A;l=l.add(r.curve.g)}throw"Unable to decrypt the ciphertext: "+e},addPlain:(e,t)=>{var a=e[0].add(r.curve.g.mul(t)),n=e[1];return[a,n]},subPlain:(e,t)=>n.addPlain(e,-t),serialize:e=>[r.serialize(e[0]),r.serialize(e[1])],unserialize:e=>[r.unserialize(e[0]),r.unserialize(e[1])]};e.exports=n},bb26:function(e,t,a){},c27f:function(e,t,a){"use strict";a("7a9d")},c332:function(e,t,a){a("149f");const r=a("46b9"),n=a("9a65"),o=a("5c99"),i=a("f2fb"),{Convolver:s,FieldVector:c,FieldVectorPolynomial:l,GeneratorParams:A,GeneratorVector:d,PolyCommitment:u,Polynomial:g}=a("ddef"),h=a("ff2d");class m{constructor(){this.serialize=()=>{var e="0x";return e+=o.representation(this.BA).slice(2),e+=o.representation(this.BS).slice(2),e+=o.representation(this.A).slice(2),e+=o.representation(this.B).slice(2),this.CLnG.forEach(t=>{e+=o.representation(t).slice(2)}),this.CRnG.forEach(t=>{e+=o.representation(t).slice(2)}),this.C_0G.forEach(t=>{e+=o.representation(t).slice(2)}),this.DG.forEach(t=>{e+=o.representation(t).slice(2)}),this.y_0G.forEach(t=>{e+=o.representation(t).slice(2)}),this.gG.forEach(t=>{e+=o.representation(t).slice(2)}),this.C_XG.forEach(t=>{e+=o.representation(t).slice(2)}),this.y_XG.forEach(t=>{e+=o.representation(t).slice(2)}),this.f.getVector().forEach(t=>{e+=o.bytes(t).slice(2)}),e+=o.bytes(this.z_A).slice(2),this.tCommits.getVector().forEach(t=>{e+=o.representation(t).slice(2)}),e+=o.bytes(this.tHat).slice(2),e+=o.bytes(this.mu).slice(2),e+=o.bytes(this.c).slice(2),e+=o.bytes(this.s_sk).slice(2),e+=o.bytes(this.s_r).slice(2),e+=o.bytes(this.s_b).slice(2),e+=o.bytes(this.s_tau).slice(2),e+=this.ipProof.serialize().slice(2),e}}}class f{constructor(){var e=new A(64),t=new h,a=(e,t,r,i)=>{if(0!=r.length){var s=r.pop(),c=i.pop(),l=new g([s.redNeg(),new n(1).toRed(o.q).redSub(c)]),A=new g([s,c]);a(e,t.mul(l),r,i),a(e,t.mul(A),r,i),r.push(s),i.push(c)}else e.push(t.coefficients)};this.generateProof=(h,f)=>{var b=new m,y=i.hash(r.encodeParameters(["bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2]","bytes32[2][]","uint256"],[h["CLn"].map(o.serialize),h["CRn"].map(o.serialize),h["C"].map(o.serialize),o.serialize(h["D"]),h["y"].map(o.serialize),h["epoch"]]));h["CLn"]=new d(h["CLn"]),h["CRn"]=new d(h["CRn"]),h["C"]=new d(h["C"]),h["y"]=new d(h["y"]),f["bTransfer"]=new n(f["bTransfer"]).toRed(o.q),f["bDiff"]=new n(f["bDiff"]).toRed(o.q);var w=f["bTransfer"].add(f["bDiff"].shln(32)),p=new c(w.toString(2,64).split("").reverse().map(e=>new n(e,2).toRed(o.q))),C=p.plus(new n(1).toRed(o.q).redNeg()),E=o.randomScalar();b.BA=e.commit(E,p,C);var v=new c(Array.from({length:64}).map(o.randomScalar)),B=new c(Array.from({length:64}).map(o.randomScalar)),R=o.randomScalar();b.BS=e.commit(R,v,B);var I=h["y"].length();if(I&I-1)throw"Size must be a power of 2!";var T=new n(I).bitLength()-1,O=o.randomScalar(),Q=o.randomScalar(),M=new c(Array.from({length:2*T}).map(o.randomScalar)),k=new c((new n(f["index"][1]).toString(2,T)+new n(f["index"][0]).toString(2,T)).split("").reverse().map(e=>new n(e,2).toRed(o.q))),D=M.hadamard(k.times(new n(2).toRed(o.q)).negate().plus(new n(1).toRed(o.q))),S=M.hadamard(M).negate(),x=new c([M.getVector()[0].redMul(M.getVector()[T]),M.getVector()[0].redMul(M.getVector()[T])]),K=new c([M.getVector()[k.getVector()[0].toNumber()*T],M.getVector()[k.getVector()[T].toNumber()*T].redNeg()]);b.A=e.commit(O,M.concat(S).concat(x)),b.B=e.commit(Q,k.concat(D).concat(K));var P=i.hash(r.encodeParameters(["bytes32","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]"],[o.bytes(y),o.serialize(b.BA),o.serialize(b.BS),o.serialize(b.A),o.serialize(b.B)])),z=Array.from({length:T}).map(o.randomScalar),H=Array.from({length:T}).map(o.randomScalar),G=Array.from({length:T}).map(o.randomScalar),L=Array.from({length:T}).map(o.randomScalar),N=[],_=[];a(N,new g,M.getVector().slice(0,T),k.getVector().slice(0,T)),a(_,new g,M.getVector().slice(T),k.getVector().slice(T)),N=Array.from({length:T}).map((e,t)=>new c(N.map(e=>e[t]))),_=Array.from({length:T}).map((e,t)=>new c(_.map(e=>e[t]))),b.CLnG=Array.from({length:T}).map((e,t)=>h["CLn"].commit(N[t]).add(h["y"].getVector()[f["index"][0]].mul(z[t]))),b.CRnG=Array.from({length:T}).map((t,a)=>h["CRn"].commit(N[a]).add(e.getG().mul(z[a]))),b.C_0G=Array.from({length:T}).map((e,t)=>h["C"].commit(N[t]).add(h["y"].getVector()[f["index"][0]].mul(H[t]))),b.DG=Array.from({length:T}).map((t,a)=>e.getG().mul(H[a])),b.y_0G=Array.from({length:T}).map((e,t)=>h["y"].commit(N[t]).add(h["y"].getVector()[f["index"][0]].mul(G[t]))),b.gG=Array.from({length:T}).map((t,a)=>e.getG().mul(G[a])),b.C_XG=Array.from({length:T}).map((e,t)=>h["D"].mul(L[t])),b.y_XG=Array.from({length:T}).map((t,a)=>e.getG().mul(L[a]));var q=new n(1).toRed(o.q);for(let t=0;t<I;t++){var J=e.getG().mul(f["bTransfer"].redMul(q)),V=t%2?_:N;b.C_XG=b.C_XG.map((e,a)=>e.add(J.mul(V[a].getVector()[(f["index"][0]+I-(t-t%2))%I].redNeg().redAdd(V[a].getVector()[(f["index"][1]+I-(t-t%2))%I])))),0!=t&&(q=q.redMul(P))}var U=i.hash(r.encodeParameters(["bytes32","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]"],[o.bytes(P),b.CLnG.map(o.serialize),b.CRnG.map(o.serialize),b.C_0G.map(o.serialize),b.DG.map(o.serialize),b.y_0G.map(o.serialize),b.gG.map(o.serialize),b.C_XG.map(o.serialize),b.y_XG.map(o.serialize)]));b.f=k.times(U).add(M),b.z_A=Q.redMul(U).redAdd(O);var Y=i.hash(r.encodeParameters(["bytes32"],[o.bytes(U)])),j=[new n(1).toRed(o.q)];for(let e=1;e<64;e++)j.push(j[e-1].redMul(Y));j=new c(j);var X=i.hash(o.bytes(Y)),F=[X.redPow(new n(2)),X.redPow(new n(3))],W=[new n(1).toRed(o.q)];for(let e=1;e<32;e++)W.push(W[e-1].redMul(new n(2).toRed(o.q)));var Z=[];for(let e=0;e<2;e++)for(var $=0;$<32;$++)Z.push(F[e].redMul(W[$]));Z=new c(Z);var ee=new l(p.plus(X.redNeg()),v),te=new l(j.hadamard(C.plus(X)).add(Z),B.hadamard(j)),ae=ee.innerProduct(te),re=new u(e,ae);b.tCommits=new d(re.getCommitments());var ne=i.hash(r.encodeParameters(["bytes32","bytes32[2]","bytes32[2]"],[o.bytes(X),...re.getCommitments().map(o.serialize)])),oe=re.evaluate(ne);b.tHat=oe.getX();var ie=oe.getR();b.mu=E.redAdd(R.redMul(ne));for(var se=o.zero,ce=o.zero,le=o.zero,Ae=o.zero,de=o.zero,ue=new c(Array.from({length:I}).map(()=>(new n).toRed(o.q))),ge=new c(Array.from({length:I}).map(()=>(new n).toRed(o.q))),he=new n(1).toRed(o.q),me=0;me<T;me++)se=se.add(e.getG().mul(z[me].redNeg().redMul(he))),Ae=Ae.add(e.getG().mul(H[me].redNeg().redMul(he))),ce=ce.add(h["y"].getVector()[f["index"][0]].mul(G[me].redNeg().redMul(he))),de=de.add(e.getG().mul(G[me].redNeg().redMul(he))),le=le.add(b.y_XG[me].mul(he.neg())),ue=ue.add(N[me].times(he)),ge=ge.add(_[me].times(he)),he=he.redMul(U);se=se.add(h["CRn"].getVector()[f["index"][0]].mul(he)),ce=ce.add(h["y"].getVector()[f["index"][0]].mul(he)),Ae=Ae.add(h["D"].mul(he)),de=de.add(e.getG().mul(he)),ue=ue.add(new c(Array.from({length:I}).map((e,t)=>t==f["index"][0]?he:(new n).toRed(o.q)))),ge=ge.add(new c(Array.from({length:I}).map((e,t)=>t==f["index"][1]?he:(new n).toRed(o.q))));var fe=new s,be=fe.convolution(ue,h["y"]),ye=fe.convolution(ge,h["y"]);q=new n(1).toRed(o.q);for(let e=0;e<I;e++){var we=e%2?ye:be;le=le.add(we.getVector()[Math.floor(e/2)].mul(q)),e>0&&(q=q.redMul(P))}var pe=o.randomScalar(),Ce=o.randomScalar(),Ee=o.randomScalar(),ve=o.randomScalar(),Be=de.mul(pe),Re=e.getG().mul(Ce),Ie=e.getG().mul(Ee).add(Ae.mul(F[0].redNeg()).add(se.mul(F[1])).mul(pe)),Te=le.mul(Ce),Oe=e.getG().mul(Ee.redNeg()).add(e.getH().mul(ve)),Qe=i.gEpoch(h["epoch"]).mul(pe);b.c=i.hash(r.encodeParameters(["bytes32","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]"],[o.bytes(ne),o.serialize(Be),o.serialize(Re),o.serialize(Ie),o.serialize(Te),o.serialize(Oe),o.serialize(Qe)])),b.s_sk=pe.redAdd(b.c.redMul(f["sk"])),b.s_r=Ce.redAdd(b.c.redMul(f["r"])),b.s_b=Ee.redAdd(b.c.redMul(f["bTransfer"].redMul(F[0]).redAdd(f["bDiff"].redMul(F[1])).redMul(he))),b.s_tau=ve.redAdd(b.c.redMul(ie.redMul(he)));var Me=e.getGs(),ke=e.getHs().hadamard(j.invert()),De=j.times(X).add(Z);let Se=b.BA.add(b.BS.mul(ne)).add(Me.sum().mul(X.redNeg())).add(ke.commit(De));Se=Se.add(e.getH().mul(b.mu.redNeg()));var xe=i.hash(r.encodeParameters(["bytes32"],[o.bytes(b.c)])),Ke=e.getG().mul(xe);Se=Se.add(Ke.mul(b.tHat));var Pe=new A(Ke,Me,ke),ze={primeBase:Pe,P:Se},He={l:ee.evaluate(ne),r:te.evaluate(ne)};return b.ipProof=t.generateProof(ze,He,xe),b}}}e.exports=f},ddef:function(e,t,a){a("149f"),a("662d");const r=a("5c99"),n=a("f2fb"),o=a("9a65"),{soliditySha3:i}=a("ecc5");class s{constructor(e,t,a){var r=n.mapInto(i("G"));if("number"==typeof e){for(var o=[],s=[],c=0;c<e;c++)o.push(n.mapInto(i("G",c))),s.push(n.mapInto(i("H",c)));e=n.mapInto(i("H")),t=new l(o),a=new l(s)}this.getG=()=>r,this.getH=()=>e,this.getGs=()=>t,this.getHs=()=>a,this.commit=(r,n,o)=>{var i=e.mul(r),s=t.getVector();if(n.getVector().forEach((e,t)=>{i=i.add(s[t].mul(e))}),o){var c=a.getVector();o.getVector().forEach((e,t)=>{i=i.add(c[t].mul(e))})}return i}}}class c{constructor(e){this.getVector=()=>e,this.length=()=>e.length,this.slice=(t,a)=>new c(e.slice(t,a)),this.add=t=>{var a=t.getVector();return new c(e.map((e,t)=>e.redAdd(a[t])))},this.plus=t=>new c(e.map(e=>e.redAdd(t))),this.sum=()=>e.reduce((e,t)=>e.redAdd(t),new o(0).toRed(r.q)),this.negate=()=>new c(e.map(e=>e.redNeg())),this.subtract=e=>this.add(e.negate()),this.hadamard=t=>{var a=t.getVector();return new c(e.map((e,t)=>e.redMul(a[t])))},this.invert=()=>new c(e.map(e=>e.redInvm())),this.extract=t=>new c(e.filter((e,a)=>a%2==t)),this.flip=()=>{var t=e.length;return new c(Array.from({length:t}).map((a,r)=>e[(t-r)%t]))},this.concat=t=>new c(e.concat(t.getVector())),this.times=t=>new c(e.map(e=>e.redMul(t))),this.innerProduct=t=>{var a=t.getVector();return e.reduce((e,t,r)=>e.redAdd(t.redMul(a[r])),new o(0).toRed(r.q))}}}class l{constructor(e){this.getVector=()=>e,this.length=()=>e.length,this.slice=(t,a)=>new l(e.slice(t,a)),this.commit=t=>{var a=t.getVector();return e.reduce((e,t,r)=>e.add(t.mul(a[r])),r.zero)},this.sum=()=>e.reduce((e,t)=>e.add(t),r.zero),this.add=t=>{var a=t.getVector();return new l(e.map((e,t)=>e.add(a[t])))},this.hadamard=t=>{var a=t.getVector();return new l(e.map((e,t)=>e.mul(a[t])))},this.negate=()=>new l(e.map(e=>e.neg())),this.times=t=>new l(e.map(e=>e.mul(t))),this.extract=t=>new l(e.filter((e,a)=>a%2==t)),this.concat=t=>new l(e.concat(t.getVector()))}}class A{constructor(){var e=new o("14a3074b02521e3b1ed9852e5028452693e87be4e910500c7ba9bbddb2f46edd",16).toRed(r.q),t=(a,n)=>{var i=a.length();if(1==i)return a;if(i%2!=0)throw"Input size must be a power of 2!";var s=e.redPow(new o(1).shln(28).div(new o(i)));n&&(s=s.redInvm());for(var l=t(a.extract(0),n),A=t(a.extract(1),n),d=[new o(1).toRed(r.q)],u=1;u<i/2;u++)d.push(d[u-1].redMul(s));d=new c(d);var g=l.add(A.hadamard(d)).concat(l.add(A.hadamard(d).negate()));return n&&(g=g.times(new o(2).toRed(r.q).redInvm())),g};this.convolution=(e,a)=>{var n=a.length(),i=t(a,!1).hadamard(t(e.flip(),!1));return t(i.slice(0,n/2).add(i.slice(n/2)).times(new o(2).toRed(r.q).redInvm()),!0)}}}class d{constructor(...e){this.getCoefficients=()=>e,this.evaluate=t=>{var a=e[0],r=t;return e.slice(1).forEach(e=>{a=a.add(e.times(r)),r=r.redMul(t)}),a},this.innerProduct=t=>{var a=t.getCoefficients(),n=Array(e.length+a.length-1).fill(new o(0).toRed(r.q));return e.forEach((e,t)=>{a.forEach((a,r)=>{n[t+r]=n[t+r].redAdd(e.innerProduct(a))})}),n}}}class u{constructor(e,t,a){this.getX=()=>t,this.getR=()=>a,this.commit=()=>e.getG().mul(t).add(e.getH().mul(a)),this.add=r=>new u(e,t.redAdd(r.getX()),a.redAdd(r.getR())),this.times=r=>new u(e,t.redMul(r),a.redMul(r))}}class g{constructor(e,t){var a=[new u(e,t[0],new o(0).toRed(r.q))];t.slice(1).forEach(t=>{a.push(new u(e,t,r.randomScalar()))}),this.getCommitments=()=>a.slice(1).map(e=>e.commit()),this.evaluate=e=>{var t=a[0],r=e;return a.slice(1).forEach(a=>{t=t.add(a.times(r)),r=r.redMul(e)}),t}}}class h{constructor(e){this.coefficients=e||[new o(1).toRed(r.q)],this.mul=e=>{var t=this.coefficients.map(t=>t.redMul(e.coefficients[0]));return t.push((new o).toRed(r.q)),e.coefficients[1].eqn(1)&&(t=t.map((e,t)=>t>0?e.redAdd(this.coefficients[t-1]):e)),new h(t)}}}e.exports={GeneratorParams:s,FieldVector:c,GeneratorVector:l,Convolver:A,FieldVectorPolynomial:d,PolyCommitment:g,Polynomial:h}},eea0:function(e,t,a){e.exports=a.p+"img/footer.0fd2b650.png"},f10d:function(e,t,a){(function(t){const r=a("7b04"),n={generateKey:e=>{if(void 0==e)return r.randomBytes(16);{const a=r.createHash("sha512");a.update(e+"AES128GCM");var t=a.digest().slice(0,16);return t}},encrypt:(e,a)=>{var n=r.randomBytes(16),o=r.createCipheriv("aes-128-gcm",a,n),i=o.update(e,"utf8");return i=t.concat([i,o.final()]),t.concat([n,o.getAuthTag(),i]).toString("hex")},decrypt:(e,a)=>{var n=t.from(e,"hex"),o=n.slice(0,16),i=n.slice(16,32),s=r.createDecipheriv("aes-128-gcm",a,o);s.setAuthTag(i);var c=s.update(n.slice(32)).toString("utf8");return c}};e.exports=n}).call(this,a("fd40").Buffer)},f2fb:function(e,t,a){const r=a("5c99"),n=a("7b04"),o=a("9a65"),i=a("46b9"),{soliditySha3:s}=a("ecc5"),c={randomUint256:()=>new o(n.randomBytes(32),16),sign:(e,t)=>{var a=r.randomScalar(),n=r.curve.g.mul(a),o=c.hash(i.encodeParameters(["address","bytes32[2]","bytes32[2]"],[e,r.serialize(t["y"]),r.serialize(n)])),s=o.redMul(t["x"]).redAdd(a);return[r.bytes(o),r.bytes(s)]},createAccount:()=>{var e=r.randomScalar(),t=r.curve.g.mul(e);return{x:e,y:t}},keyPairFromSecret:e=>{var t=c.hash(e+"ETH"),a=r.curve.g.mul(t);return{x:t,y:a}},mapInto:e=>{var t=new o(e.slice(2),16).toRed(r.p),a=r.curve.p.add(new o(1)).div(new o(4));while(1){var n=t.redPow(new o(3)).redAdd(new o(3).toRed(r.p)),i=n.redPow(a);if(i.redPow(new o(2)).eq(n))return r.curve.point(t.fromRed(),i.fromRed());t.redIAdd(new o(1).toRed(r.p))}},gEpoch:e=>c.mapInto(s("Ruby",e)),u:(e,t)=>c.gEpoch(e).mul(t),hash:e=>new o(s(e).slice(2),16).toRed(r.q)};e.exports=c},fad8:function(e,t,a){const r=a("a9df"),n=a("f10d"),o=a("9a65"),i=a("e5dd");class s extends r{constructor(e,t,a,r){if(super(e,t,a),void 0===r)throw"4th arg should be an ERC20 contract.";console.log("ERC20 contract: "+r.options.address),this.erc20Token=r}async mint(e,t,a){var r=this;r.checkRegistered(),r.checkValue();var s=r.account;console.log("Initiating mint: value of "+e+" units ("+e*r.unit+" tokens)");var c=r.web3.utils.toBN(new i(e*r.unit)).toString();void 0===t&&(t=6e4);var l=await r.erc20Token.methods.allowance(r.home,r.ruby.options.address).call();l<c&&await r.erc20Token.methods.approve(r.ruby.options.address,c).send({from:r.home,gas:t}),console.log("ERC20 tokens approved. Start mint...");let A="0x"+n.encrypt(new o(s.available()).toString(16),s.aesKey);void 0===a&&(a=4e5);let d=r.ruby.methods.mint(s.publicKeySerialized(),e,A).send({from:r.home,gas:a}).on("transactionHash",e=>{console.log('Mint submitted (txHash = "'+e+'").')}).on("receipt",async t=>{s._state=await s.update(),s._state.pending+=parseInt(e),console.log("Mint of "+e+" was successful (uses gas: "+t["gasUsed"]+")"),console.log("Account state: available = ",r.account.available(),", pending = ",r.account.pending(),", lastRollOver = ",r.account.lastRollOver())}).on("error",e=>{console.log("Mint failed: "+e)});return d}}e.exports=s},ff2d:function(e,t,a){a("149f");const r=a("46b9"),{GeneratorParams:n}=a("ddef"),o=a("5c99"),i=a("f2fb");class s{constructor(){this.serialize=()=>{var e="0x";return this.L.forEach(t=>{e+=o.representation(t).slice(2)}),this.R.forEach(t=>{e+=o.representation(t).slice(2)}),e+=o.bytes(this.a).slice(2),e+=o.bytes(this.b).slice(2),e}}}class c{constructor(){var e=(t,a,c,l,A,d,u)=>{var g=c.length();if(1==g){var h=new s;return h.L=A,h.R=d,h.a=c.getVector()[0],h.b=l.getVector()[0],h}var m=g/2,f=c.slice(0,m),b=c.slice(m),y=l.slice(0,m),w=l.slice(m),p=t.getGs().slice(0,m),C=t.getGs().slice(m),E=t.getHs().slice(0,m),v=t.getHs().slice(m),B=f.innerProduct(w),R=b.innerProduct(y),I=t.getH(),T=C.commit(f).add(E.commit(w)).add(I.mul(B)),O=p.commit(b).add(v.commit(y)).add(I.mul(R));A.push(T),d.push(O);var Q=i.hash(r.encodeParameters(["bytes32","bytes32[2]","bytes32[2]"],[o.bytes(u),o.serialize(T),o.serialize(O)])),M=Q.redInvm(),k=p.times(M).add(C.times(Q)),D=E.times(Q).add(v.times(M)),S=f.times(Q).add(b.times(M)),x=y.times(M).add(w.times(Q)),K=T.mul(Q.redMul(Q)).add(O.mul(M.redMul(M))).add(a),P=new n(I,k,D);return e(P,K,S,x,A,d,Q)};this.generateProof=(t,a,r)=>e(t["primeBase"],t["P"],a["l"],a["r"],[],[],r)}}e.exports=c}});
//# sourceMappingURL=app.bf453300.js.map